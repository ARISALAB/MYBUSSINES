<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Καταγραφή Ραντεβού</title>
    <link rel="stylesheet" href="styles.css"> <!-- Σύνδεσμος στο αρχείο CSS -->
    <link rel="icon" href="11.png" type="image/png">
</head>
<body>

    <nav>
        <img src="11.png" alt="Logo" class="logo">
        <button class="menu-toggle">&#9776;<br>Menu</button>
        <div class="menu-items">
            <a href="index.html">Αρχική Σελίδα</a>
            <a href="appointments.html">Καταγραφή Ραντεβού</a> <!-- Προσθήκη νέας επιλογής -->
        </div>
    </nav>

    <h1>Καταγραφή Ραντεβού</h1>

    <!-- Επιλογή ημερομηνίας -->
    <label for="appointment-date">Επιλέξτε Ημερομηνία</label>
    <input type="date" id="appointment-date" required>

    <!-- Φόρμα καταγραφής ραντεβού -->
    <form id="appointment-form">
        <label for="customer-name">Όνομα Πελάτη</label>
        <input type="text" id="customer-name" required>

        <label for="customer-surname">Επώνυμο Πελάτη</label>
        <input type="text" id="customer-surname" required>

        <label for="appointment-time">Ώρα Ραντεβού</label>
        <input type="time" id="appointment-time" required>

        <input type="submit" value="Προσθήκη Ραντεβού">
    </form>

    <!-- Πίνακας με τα ραντεβού για την επιλεγμένη ημερομηνία -->
    <h2>Ραντεβού για την επιλεγμένη ημερομηνία</h2>
    <ul id="appointments-list"></ul>

    <footer>&copy; 2024 Καταγραφή Ραντεβού</footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const appointmentForm = document.getElementById('appointment-form');
            const customerNameInput = document.getElementById('customer-name');
            const customerSurnameInput = document.getElementById('customer-surname');
            const appointmentTimeInput = document.getElementById('appointment-time');
            const appointmentDateInput = document.getElementById('appointment-date');
            const appointmentsList = document.getElementById('appointments-list');

            // Ανάκτηση των ραντεβού από το localStorage
            const appointments = JSON.parse(localStorage.getItem('appointments')) || {};

            // Λειτουργία για την αποθήκευση των ραντεβού
            function saveAppointments() {
                localStorage.setItem('appointments', JSON.stringify(appointments));
            }

            // Απόδοση των ραντεβού για την επιλεγμένη ημερομηνία
            function renderAppointments(date) {
                if (!appointments[date]) {
                    appointments[date] = [];
                }

                appointmentsList.innerHTML = '';
                appointments[date].forEach((appointment, index) => {
                    const appointmentItem = document.createElement('li');
                    appointmentItem.classList.add('appointment-item');
                    appointmentItem.innerHTML = `
                        <div>
                            <strong>Όνομα:</strong> <span>${appointment.name}</span>
                        </div>
                        <div>
                            <strong>Επώνυμο:</strong> <span>${appointment.surname}</span>
                        </div>
                        <div>
                            <strong>Ώρα Ραντεβού:</strong> <span>${appointment.time}</span>
                        </div>
                        <div>
                            <button class="edit-btn">Επεξεργασία</button>
                            <button class="delete-btn">Διαγραφή</button>
                        </div>
                    `;

                    appointmentItem.querySelector('.edit-btn').addEventListener('click', () => editAppointment(date, index));
                    appointmentItem.querySelector('.delete-btn').addEventListener('click', () => deleteAppointment(date, index));

                    appointmentsList.appendChild(appointmentItem);
                });
            }

            // Προσθήκη νέου ραντεβού
            function addAppointment(e) {
                e.preventDefault();

                const name = customerNameInput.value.trim();
                const surname = customerSurnameInput.value.trim();
                const time = appointmentTimeInput.value.trim();
                const date = appointmentDateInput.value.trim();

                if (!name || !surname || !time || !date) {
                    alert('Παρακαλώ συμπληρώστε όλα τα πεδία.');
                    return;
                }

                if (!appointments[date]) {
                    appointments[date] = [];
                }

                appointments[date].push({ name, surname, time });
                saveAppointments();
                renderAppointments(date);
                appointmentForm.reset();
            }

            // Επεξεργασία ραντεβού
            function editAppointment(date, index) {
                const appointment = appointments[date][index];
                customerNameInput.value = appointment.name;
                customerSurnameInput.value = appointment.surname;
                appointmentTimeInput.value = appointment.time;
                appointmentDateInput.value = date;

                deleteAppointment(date, index);
            }

            // Διαγραφή ραντεβού
            function deleteAppointment(date, index) {
                appointments[date].splice(index, 1);
                if (appointments[date].length === 0) {
                    delete appointments[date];
                }
                saveAppointments();
                renderAppointments(date);
            }

            // Εκκίνηση της εφαρμογής
            appointmentForm.addEventListener('submit', addAppointment);

            // Ενημέρωση της λίστας ραντεβού όταν επιλέγεται ημερομηνία
            appointmentDateInput.addEventListener('change', (e) => {
                const selectedDate = e.target.value;
                renderAppointments(selectedDate);
            });

            // Απόδοση ραντεβού για την αρχική επιλεγμένη ημερομηνία
            const initialDate = appointmentDateInput.value || new Date().toISOString().split('T')[0];
            renderAppointments(initialDate);
        });
    </script>

    <script>
        document.querySelector('.menu-toggle').addEventListener('click', function() {
            document.getElementById('menuModal').style.display = 'flex';
        });

        document.querySelector('.close').addEventListener('click', function() {
            document.getElementById('menuModal').style.display = 'none';
        });
        
        window.onclick = function(event) {
            if (event.target == document.getElementById('menuModal')) {
                document.getElementById('menuModal').style.display = 'none';
            }
        };
    </script>
</body>
</html>
